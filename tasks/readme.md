# Лабораторная работа 07. Тесты, кэш/ETag, ошибки/устойчивость, оптимизация, мини‑итог (новичок)

Цель: научиться базовым тестам API, кэшированию на сервере, стандартной обработке ошибок и первичной оптимизации; собрать небольшой end‑to‑end сценарий.

Задания (минимум):
1) Тесты: напишите 3–5 юнит‑тестов контроллера (xUnit/NUnit) с Moq/NSubstitute. Проверьте коды ответов и сериализацию.
2) Кэш/ETag: включите ResponseCaching и `ETag/If-None-Match` для GET, покажите 304.
3) Ошибки/устойчивость: добавьте глобальный обработчик исключений с ProblemDetails и correlation id; для вызова внешнего сервиса примените Polly (retry или timeout).
4) Оптимизация: включите сжатие ответов и настройте `System.Text.Json` (IgnoreNullValues, CamelCase). Покажите p95 до/после по одному эндпоинту.
5) Мини‑итог: один пользовательский сценарий end‑to‑end (например, логин → загрузка файла → запрос списка через API → кешированный GET), плюс 1–2 теста.

Сдача:
- Папка src — код и тесты.
- В readme: скриншоты/метрики, как проверить 304, примеры ProblemDetails.


