# Лабораторная работа 04 — Методические материалы

Темы: создание проекта ASP.NET Core (web/webapi), пайплайн, Razor/MVC страницы, сессия входа.

1. Создание проекта
- Создайте решение и проект(ы):
	- `dotnet new sln -n Task04`
	- Вариант API: `dotnet new webapi -n Task04.Api`
	- Вариант MVC/Razor: `dotnet new web -n Task04.Web`
	- Добавьте в solution: `dotnet sln Task04.sln add Task04.*`

2. Пайплайн и Swagger
- Для webapi Swagger включён по умолчанию в Development. Проверьте Program.cs и добавьте `/healthz`:
	- app.MapGet("/healthz", () => Results.Ok(new { status = "ok" }));
- Коротко о middleware: Exception handler/Developer page, HTTPS redirection, StaticFiles, Routing, Endpoints, Session.

3. Razor/MVC
- Для проекта Web создайте страницы:
	- Главная: Pages/Index.cshtml
	- Список: Pages/Items/Index.cshtml
	- Детали: Pages/Items/Details.cshtml с маршрутом "/items/{id:int}"

4. Сессия входа
- Подключите Session:
	- builder.Services.AddSession();
	- app.UseSession();
- Реализуйте простую форму входа (POST) и сохранение флага в сессии: HttpContext.Session.SetString("IsAuthenticated", "1");
- Ограничьте доступ к странице, проверяя флаг в обработчике (или через фильтр/атрибут).

5. Отчёт
- В `students/<id>/task_04/doc/readme.md`: схема пайплайна, скриншоты страниц, что хранится в сессии и где включается.

6. Запуск
- API: `dotnet run --project Task04.Api`
- Web: `dotnet run --project Task04.Web`
